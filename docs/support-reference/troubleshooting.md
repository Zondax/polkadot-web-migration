# Troubleshooting Guide

This comprehensive troubleshooting guide covers common issues, error messages, and their solutions when using the Polkadot Migration Assistant.

## Quick Diagnosis

### üö® Emergency Checklist
If you're experiencing critical issues:

1. **‚úÖ Is your Ledger connected and unlocked?**
2. **‚úÖ Is the Polkadot Universal App open on your Ledger?**
3. **‚úÖ Are you using a supported browser (Chrome/Firefox/Edge)?**
4. **‚úÖ Is your internet connection stable?**
5. **‚úÖ Have you granted browser permissions for WebUSB?**

---

## Connection Issues

### Ledger Device Not Detected

#### Symptoms
- "No device found" error message
- Connection button remains inactive
- Browser doesn't show device selection dialog

#### Root Causes & Solutions

**üîß USB Connection Issues**
```
Problem: Physical connection problems
Solutions:
‚Ä¢ Try a different USB cable (data-capable, not charge-only)
‚Ä¢ Use a different USB port (preferably USB 3.0)
‚Ä¢ Connect directly to computer (avoid USB hubs)
‚Ä¢ Clean USB ports on both device and computer
```

**üîß Browser Permissions**
```
Problem: WebUSB permissions denied or not granted
Solutions:
‚Ä¢ Refresh page and retry connection
‚Ä¢ Clear browser cache and cookies for the site
‚Ä¢ Check browser settings for USB device permissions
‚Ä¢ Try incognito/private browsing mode
‚Ä¢ Disable browser extensions that might interfere
```

**üîß Ledger Live Interference**
```
Problem: Ledger Live is blocking device access
Solutions:
‚Ä¢ Close Ledger Live completely before using Migration Assistant
‚Ä¢ End Ledger Live processes in Task Manager (Windows) or Activity Monitor (Mac)
‚Ä¢ Restart browser after closing Ledger Live
```

**üîß Operating System Issues**
```
Windows:
‚Ä¢ Install latest Ledger Live to get device drivers
‚Ä¢ Run Windows Update for latest USB drivers
‚Ä¢ Disable Windows Defender Real-time protection temporarily
‚Ä¢ Check Device Manager for USB device errors

macOS:
‚Ä¢ Grant privacy permissions for the browser
‚Ä¢ System Preferences > Security & Privacy > Privacy > USB
‚Ä¢ Reset NVRAM/PRAM if USB issues persist

Linux:
‚Ä¢ Install udev rules for Ledger devices
‚Ä¢ Add user to dialout group: sudo usermod -a -G dialout $USER
‚Ä¢ Check device permissions: ls -la /dev/ttyUSB*
```

### Ledger App Issues

#### "App Not Ready" Error

**Symptoms:** Ledger shows connected but displays "App not ready" message

**Solutions:**
1. **Verify App Installation**
   ```
   ‚Ä¢ Open Ledger Live > Manager
   ‚Ä¢ Search for "Polkadot Universal"
   ‚Ä¢ Ensure app is installed and up-to-date
   ‚Ä¢ If not found, install from Ledger Live
   ```

2. **App Opening Issues**
   ```
   ‚Ä¢ Navigate to Polkadot Universal app on Ledger
   ‚Ä¢ Press both buttons to open app
   ‚Ä¢ Ensure screen shows "Polkadot Universal ready"
   ‚Ä¢ If app crashes, restart Ledger device
   ```

3. **Legacy App Conflicts**
   ```
   ‚Ä¢ Uninstall old Polkadot/Kusama individual apps
   ‚Ä¢ These can conflict with the Universal app
   ‚Ä¢ Only keep Polkadot Universal app installed
   ```

#### Wrong App Opened

**Symptoms:** Browser connects but shows incorrect app or chains

**Solutions:**
```
‚Ä¢ Close current app on Ledger
‚Ä¢ Navigate to Polkadot Universal app specifically
‚Ä¢ Verify app name on Ledger screen matches exactly
‚Ä¢ Refresh browser page after opening correct app
```

### Browser Compatibility Issues

#### WebUSB Not Supported

**Symptoms:** "WebUSB not supported" error message

**Solutions:**
```
Recommended Browsers:
‚úÖ Chrome (version 61+)
‚úÖ Microsoft Edge (version 79+)
‚úÖ Opera (version 48+)
‚úÖ Firefox (version 94+ with webusb enabled)

Not Supported:
‚ùå Safari (no WebUSB support)
‚ùå Internet Explorer
‚ùå Mobile browsers

Firefox Setup:
1. Type 'about:config' in address bar
2. Search for 'dom.webusb.enabled'
3. Set to 'true'
4. Restart Firefox
```

#### HTTPS Requirements

**Symptoms:** WebUSB blocked on HTTP sites

**Solutions:**
```
‚Ä¢ Always use HTTPS version of Migration Assistant
‚Ä¢ Local development: use mkcert for local HTTPS
‚Ä¢ Never use HTTP for hardware wallet connections
‚Ä¢ Check for valid SSL certificate (green lock icon)
```

---

## Account Discovery Issues

### No Accounts Found

#### Symptoms
- Account discovery completes with zero accounts
- "No eligible accounts" message
- Empty account list after scanning

#### Troubleshooting Steps

**üîç Derivation Path Issues**
```
Problem: Using wrong derivation paths
Diagnosis:
‚Ä¢ Check which Ledger app was used originally
‚Ä¢ Verify if accounts were created with legacy apps
‚Ä¢ Confirm seed phrase is correct

Solutions:
‚Ä¢ Try scanning with different legacy app modes
‚Ä¢ Check account indices beyond default range
‚Ä¢ Verify you're using the same seed phrase as before
```

**üîç Network Connectivity**
```
Problem: Cannot query blockchain data
Diagnosis:
‚Ä¢ Test internet connection
‚Ä¢ Check if RPC endpoints are responding
‚Ä¢ Verify firewall/proxy settings

Solutions:
‚Ä¢ Refresh page to retry connections
‚Ä¢ Try different network (mobile hotspot)
‚Ä¢ Check corporate firewall restrictions
‚Ä¢ Wait if blockchain networks are experiencing issues
```

**üîç Account Index Range**
```
Problem: Accounts created with high index numbers
Solutions:
‚Ä¢ Extend scanning range in advanced settings
‚Ä¢ Manually specify account indices if known
‚Ä¢ Use broader derivation path scanning
```

### Incorrect Account Balances

#### Zero Balances Shown

**Symptoms:** Accounts appear but show zero or incorrect balances

**Solutions:**
```
Network Issues:
‚Ä¢ Refresh page to retry balance queries
‚Ä¢ Check network status on Polkadot.network
‚Ä¢ Try again during off-peak hours

Chain-Specific Issues:
‚Ä¢ Some parachains may have API delays
‚Ä¢ Cross-check balances on block explorers
‚Ä¢ Wait for indexing services to update

Cache Issues:
‚Ä¢ Clear browser cache and reload
‚Ä¢ Disable browser cache in developer tools
‚Ä¢ Try private/incognito browsing session
```

#### Missing Assets

**Symptoms:** Some tokens, NFTs, or staked amounts not displayed

**Solutions:**
```
Asset Discovery:
‚Ä¢ Ensure assets are on supported chains
‚Ä¢ Check if assets require specific token standards
‚Ä¢ Verify assets aren't locked in smart contracts

Staking Assets:
‚Ä¢ Bonded tokens may be on different controller accounts
‚Ä¢ Check both stash and controller addresses
‚Ä¢ Look for nomination pool participation

NFT Assets:
‚Ä¢ Verify NFT collections are supported
‚Ä¢ Check for recent minting/transfer activities
‚Ä¢ Confirm metadata is properly indexed
```

---

## Transaction Issues

### Transaction Preparation Failures

#### Insufficient Balance for Fees

**Symptoms:** "Insufficient balance" error before transaction signing

**Solutions:**
```
Fee Calculation:
‚Ä¢ Check current network fees on block explorers
‚Ä¢ Ensure enough tokens remain after transaction
‚Ä¢ Consider existential deposit requirements

Common Fee Requirements:
‚Ä¢ Polkadot: ~0.01 DOT per transaction
‚Ä¢ Kusama: ~0.001 KSM per transaction
‚Ä¢ AssetHub: Varies by operation type

Solutions:
‚Ä¢ Reduce transaction amount to cover fees
‚Ä¢ Transfer small amount of native tokens first
‚Ä¢ Use a different account with sufficient balance
```

#### Transaction Building Errors

**Symptoms:** Errors during transaction preparation phase

**Solutions:**
```
Network Connection:
‚Ä¢ Check RPC endpoint availability
‚Ä¢ Verify chain synchronization status
‚Ä¢ Try different RPC endpoint if available

Account State:
‚Ä¢ Refresh account data before transaction
‚Ä¢ Check for recent transactions affecting nonce
‚Ä¢ Verify account permissions for operation

Parameter Validation:
‚Ä¢ Double-check all input values
‚Ä¢ Ensure addresses are valid for target chain
‚Ä¢ Verify amounts are within acceptable ranges
```

### Ledger Signing Issues

#### User Rejected Transaction

**Symptoms:** "Transaction rejected by user" after Ledger interaction

**Common Causes:**
```
‚Ä¢ User pressed right button (reject) instead of left (approve)
‚Ä¢ User took too long to respond (timeout)
‚Ä¢ Transaction details didn't match expectations
‚Ä¢ Wrong transaction displayed on Ledger
```

**Solutions:**
```
Verification Process:
1. Carefully read all transaction details on Ledger screen
2. Verify destination address matches intended recipient
3. Confirm transaction amount is correct
4. Check operation type matches your intention
5. Only approve if all details are exactly as expected

Timeout Issues:
‚Ä¢ Complete signing within 60 seconds
‚Ä¢ Have transaction details ready before starting
‚Ä¢ Practice navigation on Ledger device beforehand
```

#### Ledger Communication Errors

**Symptoms:** Connection lost during signing process

**Solutions:**
```
Device Issues:
‚Ä¢ Ensure Ledger remains connected during signing
‚Ä¢ Don't disconnect or move USB cable
‚Ä¢ Keep Ledger app open throughout process
‚Ä¢ Don't navigate away from signing screen

Browser Issues:
‚Ä¢ Don't switch browser tabs during signing
‚Ä¢ Avoid putting computer to sleep
‚Ä¢ Disable power saving for USB ports
‚Ä¢ Keep Migration Assistant tab active and focused
```

### Transaction Submission Issues

#### Network Congestion

**Symptoms:** Transactions stuck in "pending" state for extended periods

**Solutions:**
```
Wait Strategies:
‚Ä¢ Normal transactions: Wait 1-3 blocks (6-18 seconds)
‚Ä¢ High network load: May take 5-10 minutes
‚Ä¢ Emergency: Cancel and retry with higher fees

Monitoring:
‚Ä¢ Check transaction hash on block explorer
‚Ä¢ Monitor network status and congestion
‚Ä¢ Look for transaction in mempool

Recovery:
‚Ä¢ Don't double-submit transactions
‚Ä¢ Wait for timeout before retrying
‚Ä¢ Use different RPC endpoint if persistent issues
```

#### Invalid Transaction Errors

**Symptoms:** Transaction rejected by network after submission

**Common Errors:**
```
"Nonce too low":
‚Ä¢ Account state changed between preparation and submission
‚Ä¢ Another transaction was processed first
‚Ä¢ Solution: Refresh account and retry

"Insufficient balance":
‚Ä¢ Balance changed after fee estimation
‚Ä¢ Existential deposit violation
‚Ä¢ Solution: Check current balance and adjust

"Invalid signature":
‚Ä¢ Ledger signing issue or corruption
‚Ä¢ Solution: Retry entire transaction process

"Call failed":
‚Ä¢ Smart contract or pallet-specific error
‚Ä¢ Solution: Check operation requirements and constraints
```

---

## Specific Operation Issues

### Staking Operations

#### Cannot Unstake

**Symptoms:** Unstaking button disabled or operation fails

**Troubleshooting:**
```
Account Eligibility:
‚Ä¢ Verify account is the stash account (not controller)
‚Ä¢ Check if account has active nominations
‚Ä¢ Ensure minimum staking period has passed

Balance Requirements:
‚Ä¢ Must have sufficient balance for transaction fees
‚Ä¢ Cannot unstake below minimum staking amount
‚Ä¢ Check for locked balance restrictions

Network Conditions:
‚Ä¢ Some networks have unstaking delays
‚Ä¢ Check era progression and timing
‚Ä¢ Verify validator set status
```

#### Unbonding Period Issues

**Symptoms:** Confusion about when tokens become available

**Explanation:**
```
Network-Specific Unbonding Periods:
‚Ä¢ Polkadot: 28 days (28 eras)
‚Ä¢ Kusama: 7 days (28 eras, shorter era duration)
‚Ä¢ Other chains: Varies by network configuration

Important Notes:
‚Ä¢ Unbonding period starts from end of current era
‚Ä¢ Multiple unbonding chunks may have different completion times
‚Ä¢ Emergency slash conditions can extend unbonding period
```

### Identity Operations

#### Cannot Remove Identity

**Symptoms:** Identity removal fails or is disabled

**Common Issues:**
```
Parent Identity Restriction:
‚Ä¢ Sub-identities cannot be removed directly
‚Ä¢ Must be removed by parent identity holder
‚Ä¢ Check identity hierarchy on-chain

Active Judgements:
‚Ä¢ Identities with active judgements may have restrictions
‚Ä¢ Some registrar judgements prevent removal
‚Ä¢ Contact relevant registrars for judgement removal

Insufficient Deposits:
‚Ä¢ Identity removal requires transaction fee
‚Ä¢ May need additional deposit for complex identities
‚Ä¢ Check balance requirements
```

### Multisig Operations

#### Coordination Issues

**Symptoms:** Multisig transactions fail due to coordination problems

**Solutions:**
```
Signatory Coordination:
‚Ä¢ Ensure all signatories are available
‚Ä¢ Coordinate timing for approval process
‚Ä¢ Share transaction details with all parties
‚Ä¢ Use secure communication for coordination

Threshold Requirements:
‚Ä¢ Verify correct number of signatures required
‚Ä¢ Check if threshold includes initiator signature
‚Ä¢ Confirm all signatories have approved

External Signatory Issues:
‚Ä¢ Some signatories may not have Migration Assistant access
‚Ä¢ May need alternative signing methods
‚Ä¢ Coordinate through other Polkadot-compatible wallets
```

---

## Performance Issues

### Slow Loading

#### Symptoms
- Long wait times for account discovery
- Slow balance loading
- Delayed transaction preparation

#### Solutions

**Browser Performance:**
```
Memory and CPU:
‚Ä¢ Close unnecessary browser tabs
‚Ä¢ Restart browser to clear memory
‚Ä¢ Check system resource usage
‚Ä¢ Use faster computer if available

Browser Settings:
‚Ä¢ Disable unnecessary extensions
‚Ä¢ Clear cache and browsing data
‚Ä¢ Enable hardware acceleration if available
‚Ä¢ Update browser to latest version
```

**Network Optimization:**
```
Connection Issues:
‚Ä¢ Use wired internet connection if possible
‚Ä¢ Test internet speed and latency
‚Ä¢ Try different network (mobile hotspot)
‚Ä¢ Check for ISP throttling or restrictions

RPC Performance:
‚Ä¢ Different RPC endpoints have varying performance
‚Ä¢ Public endpoints may be slower during peak times
‚Ä¢ Some geographical regions have better performance
‚Ä¢ Consider using paid RPC services for better reliability
```

### Memory Issues

#### Browser Crashes or Freezes

**Symptoms:** Browser becomes unresponsive or crashes during use

**Solutions:**
```
Memory Management:
‚Ä¢ Close other applications to free RAM
‚Ä¢ Use browser with more available memory
‚Ä¢ Clear browser cache before starting
‚Ä¢ Restart browser between migration sessions

Large Account Sets:
‚Ä¢ Process accounts in smaller batches
‚Ä¢ Focus on high-value accounts first
‚Ä¢ Use account filtering features
‚Ä¢ Take breaks between operations to prevent memory buildup
```

---

## Data and Sync Issues

### Stale Data

#### Symptoms
- Outdated balance information
- Missing recent transactions
- Incorrect staking status

#### Solutions

**Manual Refresh:**
```
‚Ä¢ Use browser refresh (F5 or Ctrl+R)
‚Ä¢ Click refresh buttons within the application
‚Ä¢ Disconnect and reconnect Ledger device
‚Ä¢ Clear browser cache and reload
```

**Automatic Sync Issues:**
```
Data Sources:
‚Ä¢ Some data comes from indexing services (Subscan)
‚Ä¢ Indexing may lag behind chain state
‚Ä¢ Cross-check with direct chain queries if possible

Real-time Updates:
‚Ä¢ Enable automatic refresh if available
‚Ä¢ Monitor for sync status indicators
‚Ä¢ Wait for next block if transaction just completed
```

### Missing Transaction History

#### Symptoms:** Recent transactions not visible in Migration Assistant

**Understanding:**
```
Data Limitations:
‚Ä¢ Migration Assistant focuses on current balances
‚Ä¢ Full transaction history requires block explorer
‚Ä¢ Some operations may not be immediately indexed

Workarounds:
‚Ä¢ Check transaction hash on block explorer
‚Ä¢ Verify completion through chain state queries
‚Ä¢ Wait for indexing services to update (5-15 minutes)
```

---

## Emergency Procedures

### Lost Connection During Migration

#### If connection is lost mid-migration:

1. **Don't Panic** - Your funds are safe on the blockchain
2. **Check Transaction Status** - Look up any pending transactions on block explorer
3. **Reconnect Carefully** - Restart the process from connection step
4. **Verify Account State** - Check if any operations completed successfully
5. **Resume or Retry** - Continue from where migration left off

### Partial Migration Completion

#### If some accounts migrated successfully but others failed:

1. **Document Progress** - Note which accounts completed successfully
2. **Identify Issues** - Determine cause of failures for remaining accounts
3. **Address Problems** - Resolve specific issues (fees, permissions, etc.)
4. **Complete Migration** - Process remaining accounts once issues resolved

### Emergency Recovery

#### If you encounter critical issues:

```
Immediate Steps:
1. Disconnect Ledger device safely
2. Close Migration Assistant browser tab
3. Document error messages and circumstances
4. Take screenshots of any error states

Data Safety:
‚Ä¢ Your seed phrase and private keys remain secure
‚Ä¢ Funds cannot be lost through Migration Assistant
‚Ä¢ All operations require explicit confirmation on Ledger
‚Ä¢ No sensitive data is stored in browser

Recovery Process:
1. Restart browser and clear cache
2. Reconnect Ledger with fresh session
3. Verify account balances on block explorer
4. Resume migration with proper troubleshooting
```

---

## Getting Additional Help

### Self-Diagnosis Tools

**Browser Developer Console:**
```
1. Press F12 to open developer tools
2. Click "Console" tab
3. Look for error messages in red
4. Screenshot errors for support requests
```

**Network Tab Analysis:**
```
1. Open Developer Tools > Network tab
2. Refresh page or retry operation
3. Look for failed requests (red entries)
4. Check response codes and error messages
```

### Community Support

**Before Requesting Help:**
```
Information to Gather:
‚Ä¢ Browser version and operating system
‚Ä¢ Ledger device model and firmware version
‚Ä¢ Exact error messages (screenshots helpful)
‚Ä¢ Steps leading to the issue
‚Ä¢ Network you were trying to use
```

**Support Channels:**
- Official documentation and FAQ
- Community forums and Discord
- GitHub issues for technical problems
- Ledger support for hardware issues

### Advanced Troubleshooting

**For Technical Users:**
```
Browser Console Commands:
‚Ä¢ navigator.usb.getDevices() - Check connected USB devices
‚Ä¢ localStorage.clear() - Clear stored application data
‚Ä¢ sessionStorage.clear() - Clear session data

Network Debugging:
‚Ä¢ Test RPC endpoints directly with curl
‚Ä¢ Check firewall and proxy configurations
‚Ä¢ Analyze network traffic with browser tools
```

**Log Collection:**
```
1. Open browser console before starting operation
2. Enable "Preserve log" option
3. Reproduce the issue
4. Save console output to file
5. Include in support requests
```

---

## Prevention Tips

### Best Practices for Smooth Operation

1. **Prepare Environment**
   - Use dedicated browser session
   - Close unnecessary applications
   - Ensure stable internet connection
   - Have Ledger firmware updated

2. **Plan Migration**
   - Review all accounts before starting
   - Understand required operations
   - Check network conditions and fees
   - Have sufficient time available

3. **Monitor Progress**
   - Watch for error messages immediately
   - Verify each step completion
   - Take notes of successful operations
   - Keep transaction hashes for reference

4. **Stay Updated**
   - Check for Migration Assistant updates
   - Monitor network status and announcements
   - Keep Ledger firmware current
   - Follow security best practices

Remember: The Migration Assistant is designed to be safe and user-friendly. Most issues can be resolved with patience and systematic troubleshooting. When in doubt, take your time and verify everything twice.